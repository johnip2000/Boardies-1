<%- include('../header'); -%>

<div class="mb-auto">
    <div class="container">
        <div class="row justify-content-center mt-4">
            <div class="col-lg-8 col-xl-9  mb-5">
                <div class="block-header mb-5">
                    <strong class="text-uppercase mb-0">Your Addresses</strong>
                </div>                                    
            <div class="block-body">
                <div class="row">
                    <div class="col-12">
                        <% if(address.length > 0) { %> 
                            <% address.forEach(function(item){%>
                                <% if(item.address2 == "") { %>
                                    <div class="row">
                                        <div class="col-8">
                                            <div class="card border-light">
                                                <div class="card-header">
                                                    <span class="flex-grow-1 align-middle"><%=item.address1%>, <%=item.city%>, 
                                                        <%=item.province%>, <%=item.country%>, <%=item.postalCode%></span>          
                                                </div>
                                            </div>  
                                        </div>
                                        <div class="col-4">
                                            <a class="d-inline btn btn-lg btn-dark align-self-start ml-3" href="/customer/address/edit?addressID=<%item.addressID%>">Edit</a>
                                            <form method="POST" class="d-inline">
                                                <input class="btn btn-lg btn-danger align-self-start ml-2" type="submit" value="Delete"/>
                                            </form>  
                                        </div>
                                    </div>
                                <% } else {%> 
                                    <div class="row">
                                        <div class="col-8">
                                            <div class="card border-light">
                                                <div class="card-header">
                                                    <span class="flex-grow-1 align-middle"><%=item.address1%>, <%=item.address2%>,
                                                        <%=item.city%>, <%=item.province%>, <%=item.country%>, <%=item.postalCode%></span>          
                                                </div>
                                            </div>  
                                        </div>
                                        <div class="col-4">
                                            <a class="d-inline btn btn-lg btn-dark align-self-start ml-3" href="/customer/address/edit?addressID=<%=item.addressID%>">Edit</a>
                                            <form method="GET" class="d-inline" action='/customer/address/delete'>
                                                <input type="hidden" name="addressID" value=<%=item.addressID%>>
                                                <input class="btn btn-lg btn-danger align-self-start ml-2" type="submit" value="Delete"/>
                                            </form>  
                                        </div>
                                    </div>
                                <%}%>
                                
                            <% }); %>      
                        <% } %>                              
                        <div class="mt-5"><a class="btn btn-sm btn-dark" href="/customer/address/add">Add a New Address</a></div>
                    </div>
                </div>
            </div>  
        </div>
        <div class="col-xl-3 col-lg-4 mb-5">
            <div class="customer-sidebar card border-0">
                <div class="customer-profile">
                    <h5><%=userInfo.fullName%></h5>
                </div>
                <nav class="list-group customer-nav">
                    <a href="/customer/profile" class="list-group-item">
                        <i class="far fa-user-circle mr-2"></i> Profile
                    </a>
                    <a href="/customer/address" class="list-group-item active">
                        <i class="fas fa-map-marker-alt mr-2"></i> Address Information
                    </a>
                    <a href="/customer/orders" class="list-group-item">
                        <i class="fas fa-shopping-bag mr-2"></i> Your Order
                    </a>
                    <a href="/customer/changepassword" class="list-group-item"><span>
                      <i class="fas fa-key mr-2"></i>Change your password</span>
                    </a>
                    <a href="/logout" class="list-group-item"><span>
                        <i class="fas fa-sign-out-alt mr-2"></i>Log out</span>
                    </a>    
                </nav>
            </div>
        </div>        
    </div>
</div>

<%- include('../footer'); -%>
